---
kvm_packages:
  - bridge-utils
  - libvirt-client
  - libvirt-python
  - libvirt
  - qemu-img
  - qemu-kvm
  - virt-install
  - virt-manager
  - virt-viewer

# Variables for libvirtd.conf
kvm_enable_tls: true
kvm_enable_tcp: false
kvm_tls_port: 16514
kvm_tcp_port: 16509
kvm_listen_addr: 0.0.0.0
kvm_enable_mdns: false

kvm_unix_sock_dir: /var/run/libvirt
kvm_auth_unix_ro: none
kvm_auth_unix_rw: none

kvm_max_clients: 500
kvm_max_queued_clients: 50
kvm_max_anonymous_clients: 20
kvm_min_workers: 5
kvm_max_workers: 20
kvm_prio_workers: 5
kvm_max_requests: 20
kvm_max_client_requests: 5
kvm_admin_min_workers: 1
kvm_admin_max_workers: 5
kvm_admin_max_clients: 5
kvm_admin_max_queued_clients: 5
kvm_admin_max_client_requests: 5

kvm_log_level: 3
kvm_enable_libvirtd_syslog: false

kvm_audit_logging: 0

kvm_keepalive_interval: 5
kvm_keepalive_count: 5
kvm_admin_keepalive_interval: 5
kvm_admin_keepalive_count: 5

kvm_ovs_timeout: 5

# Variables for users
kvm_users:
  []

# Variable for networks
kvm_config_virtual_networks: true

kvm_virtual_networks:
  - name: main_net
    mode: bridge
    bridge_name: br0
    autostart: true
    state: active
  # - name: ovs-network
  #   mode: bridge
  #   bridge_name: ovsbr0
  #   autostart: true
  #   # active, inactive, present and absent
  #   state: active
  #   virtualport_type: openvswitch
  #   vlans:
  #     - name: vlan-101
  #       trunk: false
  #       vlan: 101
  #     - name: vlan-102
  #       trunk: false
  #       vlan: 102
  #     - name: vlan-201
  #       trunk: false
  #       vlan: 201
  #     - name: vlan-all
  #       trunk: true
  #       vlan:
  #         - 101
  #         - 102
  #         - 201
  # - name: Green_Servers_VLAN101
  #   mode: bridge
  #   bridge_name: vmbr101
  #   autostart: true
  #   state: active
  # - name: maas
  #   mode: bridge
  #   bridge_name: ovsbr0
  #   autostart: true
  #   state: active
  #   virtualport_type: openvswitch
  #   vlan: 193
